# upperH

upperH is a collection of helper functions to make starting a nodeJS project faster.

# Get started

## Install

    npm install upperh --save

## How to use

    const H = require('upperh');


    (async () =>Â {

    	// Your program here:

    	var name = await H.input('What is your name?');
    	var password = await H.input('Password: ', true); // input is muted (not displayed)

    	await H.delay(2000); // Wait 2 seconds

    	var fileContent = await H.readFile('myfile.txt');

    	await H.writeFile('myfile-copy.txt', fileContent);



    })();

## Helper functions

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [readFileBuff](#readfilebuff)
    -   [Parameters](#parameters)
-   [readFile](#readfile)
    -   [Parameters](#parameters-1)
-   [readDir](#readdir)
    -   [Parameters](#parameters-2)
-   [writeFile](#writefile)
    -   [Parameters](#parameters-3)
-   [readFileSync](#readfilesync)
    -   [Parameters](#parameters-4)
-   [writeFileSync](#writefilesync)
    -   [Parameters](#parameters-5)
-   [exec](#exec)
    -   [Parameters](#parameters-6)
-   [delay](#delay)
    -   [Parameters](#parameters-7)
-   [timestampMs](#timestampms)
-   [timestamp](#timestamp)
-   [relativeTime](#relativetime)
    -   [Parameters](#parameters-8)
-   [uniqueToken](#uniquetoken)
-   [md5](#md5)
    -   [Parameters](#parameters-9)
-   [sha1](#sha1)
    -   [Parameters](#parameters-10)
-   [sha256](#sha256)
    -   [Parameters](#parameters-11)
-   [encrypt](#encrypt)
    -   [Parameters](#parameters-12)
    -   [Examples](#examples)
-   [decrypt](#decrypt)
    -   [Parameters](#parameters-13)
    -   [Examples](#examples-1)
-   [render](#render)
    -   [Parameters](#parameters-14)
-   [renderFile](#renderfile)
    -   [Parameters](#parameters-15)
-   [handlize](#handlize)
    -   [Parameters](#parameters-16)
-   [regexp](#regexp)
-   [hasOwnProp](#hasownprop)
    -   [Parameters](#parameters-17)
-   [getVariable](#getvariable)
    -   [Parameters](#parameters-18)
-   [setVariable](#setvariable)
    -   [Parameters](#parameters-19)
-   [escape](#escape)
    -   [Parameters](#parameters-20)
-   [input](#input)
    -   [Parameters](#parameters-21)
-   [waitForKey](#waitforkey)
    -   [Parameters](#parameters-22)
-   [onKeypress](#onkeypress)
    -   [Parameters](#parameters-23)
-   [httpRequest](#httprequest)
    -   [Parameters](#parameters-24)
-   [httpGet](#httpget)
    -   [Parameters](#parameters-25)
-   [httpPost](#httppost)
    -   [Parameters](#parameters-26)
-   [httpPut](#httpput)
    -   [Parameters](#parameters-27)
-   [httpDelete](#httpdelete)
    -   [Parameters](#parameters-28)
-   [httpServer](#httpserver)
    -   [Parameters](#parameters-29)
-   [Error](#error)
    -   [Parameters](#parameters-30)

### readFileBuff

Reads a local file and returns a buffer

#### Parameters

-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** File path

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Buffer](https://nodejs.org/api/buffer.html)>** Content of the file as a buffer

### readFile

Reads a local file and returns it content as a string

#### Parameters

-   `args` **...any** 
-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** File path

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Content of the file's content as a string

### readDir

Returns the list of files of a directory

#### Parameters

-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Path of the directory

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)>** Directory list

### writeFile

Writes a string into a file

#### Parameters

-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** File path
-   `content` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** New file content

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### readFileSync

Reads a local file (synchronously) and returns it content as a string

#### Parameters

-   `args` **...any** 
-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** File path

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Content of the file's content as a string

### writeFileSync

Writes a string into a file (synchronously)

#### Parameters

-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** File path
-   `content` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** New file content

### exec

Executes a child process

#### Parameters

-   `command` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Command to execute
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Options (see child_process.exec)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;stdout, stderr>** Returns command output (stdout & stderr)

### delay

Wait for a number of miliseconds

#### Parameters

-   `time` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Time in miliseconds

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### timestampMs

Returns current timestamp in miliseconds

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** timestamp in miliseconds

### timestamp

Returns current timestamp in seconds

Returns **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** timestamp in seconds

### relativeTime

Converts a timestamp into relative time. E.g. about 2 hours ago; less than a minute; in about 5 minutes

#### Parameters

-   `timestamp` **([Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Date](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date))** Time

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** relative representation of timestamp

### uniqueToken

Returns a random _unique_ token

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Hexadecimal representation of token

### md5

Returns MD5 hash

#### Parameters

-   `str` **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Input to get hash of

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** MD5 hash of input (in HEX format)

### sha1

Returns SHA1 hash

#### Parameters

-   `str` **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Input to get hash of

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** SHA1 hash of input (in HEX format)

### sha256

Returns SHA256 hash

#### Parameters

-   `str` **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Input to get hash of

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** SHA256 hash of input (in HEX format)

### encrypt

Encrypts an input string with aes-256-cbc encryption algorithm

#### Parameters

-   `data` **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Input data to encrypt
-   `key` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Encryption key in HEX format. Must be a 32byte key for a 256bit algorithm.
-   `iv` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** IV to use for the encryption in HEX format. For AES, length must be 16
-   `algo` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Encryption algorithm (optional, default `"aes-256-cbc"`)
-   `format` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Format of output (optional, default `"hex"`)

#### Examples

```javascript
const key = crypto.scryptSync('Password here', 'salt', 32).toString('hex'); // 32 = 256/8
const iv = Buffer.from('d65a8b0dcbde0b76cc746faaf0b0beaa', 'hex'); // For AES, length is 16
var encryptedData = H.encrypt('My secret data', key, iv);
```

Returns **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Encrypted data

### decrypt

Decrypts an input string with aes-256-cbc encryption algorithm

#### Parameters

-   `data` **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Input data to decrypt
-   `key` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Decryption key in HEX format. Must be a 32byte key for a 256bit algorithm.
-   `iv` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** IV to use for the decryption in HEX format. For AES, length must be 16
-   `algo` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Decryption algorithm (optional, default `"aes-256-cbc"`)
-   `format` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Format of output (optional, default `"hex"`)

#### Examples

```javascript
const key = crypto.scryptSync('Password here', 'salt', 32).toString('hex'); // 32 = 256/8
const iv = Buffer.from('d65a8b0dcbde0b76cc746faaf0b0beaa', 'hex'); // For AES, length is 16
var originalData = H.encrypt(encryptedData, key, iv);
```

Returns **([String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Buffer](https://nodejs.org/api/buffer.html))** Encrypted data

### render

Renders a nunjucks/jinja template string asynchronously

#### Parameters

-   `str` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Template string (jinja/nunjucks)
-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Data to inject in template
-   `filters` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Filters functions to allow in template (optional, default `{}`)
-   `includeCb` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Callback function that is called whenever the template calls the include instruction.

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Rendered template

### renderFile

Renders a nunjucks/jinja template file asynchronously

#### Parameters

-   `file`  
-   `args` **...any** 
-   `str` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Path of template file to render
-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Data to inject in template
-   `filters` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Filters functions to allow in template
-   `includeCb` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Callback function that is called whenever the template calls the include instruction.

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Rendered template

### handlize

Converts a string into a handlized format (uppercase letters, numbers and dashes)

#### Parameters

-   `str` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** String to handlize

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Handle

### regexp

Helper REGEX expressions
handle : Valid handle (lowercase letters, numbers, underscores and dashes).
email : Valid email address

### hasOwnProp

Determines if an object has a property. (uses Object.prototype for security)

#### Parameters

-   `obj` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Object to check
-   `key` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Property to check

Returns **Bool** True if obj has the key property

### getVariable

Goes through an object and returns value of a specific path (using dot notation)

#### Parameters

-   `obj` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Input object
-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Path to traverse (dot notation). e.g. parent.children.property

Returns **Mixed** Value of the path element

### setVariable

Goes through an object and sets the value of a specific path (using dot notation)

#### Parameters

-   `obj` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Input object
-   `path` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Path to traverse (dot notation). e.g. parent.children.property
-   `value` **Mixed** New value to inject

### escape

Escapes a string for HTML injection

#### Parameters

-   `str` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Input string

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Cleaned output

### input

Requests input from user in command line interface

#### Parameters

-   `q` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Question to ask to user during input
-   `muted` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Whether to mute the user input (for passwords) (optional, default `false`)

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the value the user has entered

### waitForKey

Shortcut for H.input but without the muted parameter set to true

#### Parameters

-   `q` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Question to ask to user during input (optional, default `''`)

Returns **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the value the user has entered

### onKeypress

Listens to keypresses and calls callback when a key is pressed. Exists when Ctrl+C is typed

#### Parameters

-   `cb` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Callback to function that will listen to key presses

### httpRequest

Requests an HTTP endpoint

#### Parameters

-   `method` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Method to use (GET|POST|PUT|DELETE|HEAD)
-   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** HTTP endpoint
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Payload to inject (will be converted to query string in case of GET request) (optional, default `{}`)
-   `headers` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Headers to inject (optional, default `{}`)
-   `extras` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** extra options for request (same as request library) (optional, default `{}`)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Response body

### httpGet

Requests a GET HTTP endpoint

#### Parameters

-   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** HTTP endpoint
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Payload to inject will be converted to query string
-   `headers` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Headers to inject
-   `extras` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** extra options for request (same as request library)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Response body

### httpPost

Requests a POST HTTP endpoint

#### Parameters

-   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** HTTP endpoint
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Payload to inject
-   `headers` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Headers to inject
-   `extras` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** extra options for request (same as request library)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Response body

### httpPut

Requests a PUT HTTP endpoint

#### Parameters

-   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** HTTP endpoint
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Payload to inject
-   `headers` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Headers to inject
-   `extras` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** extra options for request (same as request library)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Response body

### httpDelete

Requests a DELETE HTTP endpoint

#### Parameters

-   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** HTTP endpoint
-   `payload` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Payload to inject
-   `headers` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Headers to inject
-   `extras` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** extra options for request (same as request library)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Response body

### httpServer

Starts an HTTP server and calls specific handlers depending on request url

#### Parameters

-   `port`   (optional, default `80`)
-   `handlers` **([Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function) \| [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))** If function, it will run function and use returned Object to select handler. If Object, it will use it directly to select the handler. The handler is selected if it matches the request url. If the handler's key starts with ^, it will be considered as a REGEX.
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Extra options. defaultHandler, onError, beforeHandler, pathFlags, afterHandler, autoEnd, maxPostRequestSize,
-   `post` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Post to listen to (optional, default `80`)

### Error

Custom Error constructor

#### Parameters

-   `message` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Error message
-   `code` **[Number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Error code.
